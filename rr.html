<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chi tiết Tour Sa Pa</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body { background: #f8f9fa; }

    .tour-header {
      background: linear-gradient(135deg, #f5c542, #f2b705);
      color: #3b2a0a;
    }

    .tour-related-wrapper {
      position: sticky;
      top: 90px;
    }

    /* Thu nhỏ khung thanh toán bên phải: giới hạn chiều rộng và giảm padding/font */
    .tour-related-wrapper .bg-white {
      max-width: 400px;
      margin-left: auto;
      min-height: 460px; 
    }

    /* Payment boxes: gradients only on hover */
    .payment-card {
      background: #ffffff;
      color: #1f2937;
      border: 1px solid rgba(0,0,0,0.04);
      transition: background 220ms ease, color 220ms ease, transform 160ms ease;
    }
    .payment-card .bi { opacity: 0.9; transition: opacity 220ms ease; }
    .payment-card:hover { transform: translateY(-3px); color: #fff; }
    .payment-card.g-red:hover { background: linear-gradient(135deg, #ff416c, #ff8a5b); }
    .payment-card.g-orange:hover { background: linear-gradient(135deg, #ff8a5b, #ffcd3c); }
    .payment-card.g-green:hover { background: linear-gradient(135deg, #ffcd3c, #56ab2f); }
    .payment-card.g-purple:hover { background: linear-gradient(120deg, #667eea, #764ba2); }

    .tour-related-wrapper .p-4 .d-flex,
    .tour-related-wrapper .p-4 .payment-info,
    .tour-related-wrapper .p-4 .btn {
      padding: 12px !important;
    }

    .tour-related-wrapper .p-4 .fs-3 { font-size: 1.5rem !important; }
    .tour-related-wrapper .p-4 .fs-4 { font-size: 1.05rem !important; }
    .tour-related-wrapper .p-4 .small { font-size: 0.85rem !important; }

    .schedule-timeline {
      border-left: 3px solid #f5c542;
      padding-left: 20px;
    }

    .schedule-day {
      font-weight: 700;
      color: #f5c542;
      font-size: 18px;
      margin-bottom: 8px;
    }

    .status-paid {
      background: #d1e7dd;
      color: #0f5132;
      border-radius: 50px;
      padding: 6px 14px;
      font-weight: 600;
    }

    .status-unpaid {
      background: #f8d7da;
      color: #842029;
      border-radius: 50px;
      padding: 6px 14px;
      font-weight: 600;
    }
    /* ===== PAYMENT MODAL THEME ===== */
#paymentModal .modal-content {
  border-radius: 18px;
  border: none;
  background: #fffdf7;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
}

/* Header */
#paymentModal .modal-header {
  background: linear-gradient(135deg, #8b6b2f, #a8843a);
  color: #fff;
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  padding: 16px 20px;
}

#paymentModal .modal-title {
  font-weight: 700;
}

#paymentModal .btn-close {
  filter: invert(1);
}

/* Body */
#paymentModal .modal-body {
  padding: 20px;
}

#paymentModal label {
  font-weight: 600;
  color: #5a471c;
}

#paymentModal .form-select,
#paymentModal .form-control {
  border-radius: 12px;
  border: 1px solid #ddd;
  padding: 10px 12px;
}

/* Info box */
.payment-info {
  background: #fdf7e3;
  border: 1px dashed #e0c97a;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 16px;
  font-size: 15px;
}

.payment-info div {
  margin-bottom: 6px;
}

/* Footer */
#paymentModal .modal-footer {
  border-top: none;
  padding: 16px 20px 20px;
}

#paymentModal .btn-success {
  background: linear-gradient(135deg, #8b6b2f, #a8843a);
  border: none;
  border-radius: 12px;
  padding: 8px 18px;
  font-weight: 600;
}

#paymentModal .btn-success:hover {
  opacity: 0.9;
}
.ee{
    background: #7b5e2a;
}
.cc{
    color: #cb9d45;
}

  </style>
</head>

<body>



<main class="container my-4">

  <!-- THÔNG TIN CHÍNH -->
  <div class="bg-white p-4 rounded-4 shadow-sm mb-4">
    <div class="row align-items-center">
      <div class="col-lg-6 mb-3 mb-lg-0">
        <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470"
             class="img-fluid rounded-4">
      </div>
<div class="col-lg-6">
        <h2 class="fw-bold">Tour Sa Pa – Fansipan 2N1Đ</h2>
        <p class="text-muted fs-5">Du lịch nghỉ dưỡng – khám phá núi rừng</p>
        <div class="fs-4 fw-bold text-danger mb-2">2.890.000đ / người</div>
        <div class="text-muted">Mã tour: <strong>SP-FANS-21</strong></div>
      </div>
    </div>
  </div>

  <div class="row g-4">

  <!-- CỘT TRÁI: THÔNG TIN TOUR + MÔ TẢ + DANH SÁCH KHÁCH -->
  <div class="col-lg-8">

    <!-- Mô tả tour + lịch trình (giữ nguyên) -->
    <div class="bg-white p-4 rounded-4 shadow-sm mb-4">
      <h4 class="cc fw-bold mb-3">
        <i class="bi bi-info-circle me-2"></i>Mô tả tour
      </h4>
      <p class="fs-5">
        Tour Sa Pa – Fansipan 2 ngày 1 đêm mang đến cho du khách trải nghiệm
        không khí mát mẻ vùng núi Tây Bắc, tham quan bản làng dân tộc,
        chinh phục đỉnh Fansipan.
      </p>

      <hr>

      <h5 class="cc fw-bold mb-3">
        <i class="bi bi-calendar2-week me-2"></i>Chuyến khởi hành
      </h5>

      <div class="card border-0 shadow-sm p-3 mb-4">
        <p>
          <span class="text-success fs-5">15/10/2025</span> →
          <span class="text-danger fs-5">16/10/2025</span>
        </p>
        <p class="mb-0">
          <i class="bi bi-geo-alt me-2"></i>Nhà hát lớn Hà Nội
        </p>
      </div>

      <h5 class="cc fw-bold mb-3">
        <i class="bi bi-list-check me-2"></i>Lịch trình tour
      </h5>

      <div class="schedule-timeline">
        <div class="mb-3">
          <div class="schedule-day">Ngày 1</div>
          <ul>
            <li>Khởi hành – tham quan Cát Cát</li>
            <li>Nhận phòng – nghỉ ngơi</li>
          </ul>
        </div>
        <div>
          <div class="schedule-day">Ngày 2</div>
          <ul>
            <li>Fansipan – về Hà Nội</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- DANH SÁCH KHÁCH HÀNG (đặt dưới mô tả tour) -->
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h5 class="cc fw-bold mb-0">
        <i class="bi bi-people-fill me-2"></i>Danh sách khách hàng
      </h5>
      <button class="btn btn-primary btn-sm px-3 py-1 fw-semibold shadow-sm" data-bs-toggle="modal" data-bs-target="#addCustomerModal">
        <i class="bi bi-person-plus-fill me-1"></i>Thêm
      </button>
    </div>

    <div class="card border-0 shadow-sm p-4 mb-4">
      <div class="table-responsive">
        <table class="table table-bordered text-center align-middle">
          <thead class="table-light">
            <tr>
              <th>Tên</th>
              <th>Email</th>
              <th>SĐT</th>
              <th>Số lượng</th>
              <th>Số tiền</th>
              <th>Trạng thái</th>
            </tr>
          </thead>
          <tbody id="customerTableBody">
            <tr>
              <td>Nguyễn Văn A</td>
              <td>a@gmail.com</td>
              <td>0987 654 321</td>
              <td>2</td>
              <td class="text-danger fw-bold">5.780.000đ</td>
              <td><span class="status-paid">Đã cọc</span></td>
            </tr>
            <tr>
              <td>Trần Thị B</td>
<td>b@gmail.com</td>
              <td>0912 345 678</td>
              <td>1</td>
              <td class="text-danger fw-bold">2.890.000đ</td>
              <td><span class="status-unpaid">Chưa cọc</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Button moved to header -->
    </div>

  </div>

<!-- CỘT PHẢI: THANH TOÁN - SẠCH ĐẸP, CHUYÊN NGHIỆP 2025 -->
<div class="col-lg-4">
    
  <div class="tour-related-wrapper">
    <div class="bg-white rounded-4" style="box-shadow: 0 4px 25px rgba(0,0,0,0.06); overflow: hidden;">
      
      <!-- Header nhẹ nhàng -->
      <div class="ee text-white py-4 px-4 text-center rounded-top-4">
        <h5 class="fw-bold mb-1">
          <i class="bi bi-receipt me-2"></i>Thông tin thanh toán
        </h5>
        <small class="opacity-90">Tổng quan chi phí tour</small>
      </div>

      <div class="p-4">


        <!-- 1. Tổng tiền tour - Gradient đỏ → cam (show on hover) -->
        <div class="payment-card g-red d-flex align-items-center justify-content-between p-4 rounded-4 mb-3">
          <div>
            <div class="small opacity-90 fw-medium">Tổng tiền tour</div>
            <div class="fs-3 fw-bold">8.670.000đ</div>
          </div>
          <i class="bi bi-wallet2 fs-2 opacity-90"></i>
        </div>

        <!-- 2. Phí phát sinh - Gradient cam → vàng (show on hover) -->
        <div class="payment-card g-orange d-flex align-items-center justify-content-between p-4 rounded-4 mb-3">
          <div>
            <div class="small opacity-90 fw-medium">Phí phát sinh</div>
            <div class="fs-4 fw-bold">1.670.000đ</div>
          </div>
          <i class="bi bi-receipt fs-2 opacity-90"></i>
        </div>

        <!-- 3. Đã thanh toán (cọc 30%) - Gradient vàng → xanh lá (show on hover) -->
        <div class="payment-card g-green d-flex align-items-center justify-content-between p-4 rounded-4 mb-3">
          <div>
            <div class="small opacity-90 fw-medium">Đã thanh toán (cọc 30%)</div>
            <div class="fs-4 fw-bold">2.601.000đ</div>
          </div>
          <i class="bi bi-piggy-bank fs-2 opacity-90"></i>
        </div>

       <!-- Còn lại cần thanh toán - NỔI BẬT NHƯNG KHÔNG LỐ (show on hover) -->
        <div class="payment-card g-purple d-flex justify-content-between align-items-center p-4 rounded-4 mb-4">
          <div>
            <div class="small opacity-90">Còn lại cần thanh toán</div>
<div class="fs-3 fw-bold">6.069.000đ</div>
          </div>
          <i class="bi bi-credit-card fs-2 opacity-90"></i>
        </div>

        <!-- Nút thêm thanh toán -->
        <button class="btn btn-primary w-100 py-3 fw-bold rounded-4 d-flex align-items-center justify-content-center gap-2"
                data-bs-toggle="modal" data-bs-target="#paymentModal">
          <i class="bi bi-plus-circle-fill"></i>
          Thêm thanh toán mới
        </button>

      </div>
    </div>
  </div>
</div>
     
</main>

<div class="modal fade" id="paymentModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4">

      <!-- Header -->
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-credit-card me-2"></i>Thêm thanh toán
        </h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Body -->
      <div class="modal-body">

        <!-- Khách hàng -->
        <div class="mb-3">
          <label class="form-label">Khách hàng</label>
<select class="form-select" id="customerSelect">
            <option value="">-- Chọn khách hàng --</option>
            <option data-email="a@gmail.com" data-phone="0987654321" data-total="5780000">
              Nguyễn Văn A
            </option>
            <option data-email="b@gmail.com" data-phone="0912345678" data-total="2890000">
              Trần Thị B
            </option>
          </select>
        </div>

        <!-- Thông tin tự động -->
        <div class="row g-3 mb-3">

  <div class="col-md-6">
    <label class="form-label">Email</label>
    <input type="text" class="form-control" id="cusEmail" readonly>
  </div>

  <div class="col-md-6">
    <label class="form-label">Số điện thoại</label>
    <input type="text" class="form-control" id="cusPhone" readonly>
  </div>

  <div class="col-md-6">
    <label class="form-label">Tổng tiền</label>
    <input type="text" class="form-control text-danger fw-bold" id="cusTotal" readonly>
  </div>

  <div class="col-md-6">
    <label class="form-label">Tiền phải cọc (30%)</label>
    <input type="text" class="form-control text-success fw-bold" id="cusDeposit" readonly>
  </div>

</div>


        <!-- Nhập tiền -->
        <div class="mb-3">
          <label class="form-label">Số tiền thanh toán</label>
          <input type="number" class="form-control" placeholder="Nhập số tiền">
        </div>

      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
        <button class="btn btn-success">
          <i class="bi bi-check-circle me-1"></i>Xác nhận
        </button>
      </div>

    </div>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.getElementById('customerSelect').addEventListener('change', function () {
    const o = this.selectedOptions[0];
    if (!o.dataset.total) return;

    const total = +o.dataset.total;
    document.getElementById('cusEmail').value = o.dataset.email || '';
    document.getElementById('cusPhone').value = o.dataset.phone || '';
    document.getElementById('cusTotal').value = total.toLocaleString('vi-VN') + 'đ';
    document.getElementById('cusDeposit').value = Math.round(total * 0.3).toLocaleString('vi-VN') + 'đ';
  });
</script>


<!-- Modal Thêm Khách Hàng -->
<div class="modal fade" id="addCustomerModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4">
      <!-- Header -->
      <div class="modal-header" style="background: linear-gradient(135deg, #007bff, #0056b3); color: #fff;">
        <h5 class="modal-title">
          <i class="bi bi-person-plus me-2"></i>Thêm khách hàng mới
        </h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <!-- Body -->
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label fw-bold">Họ và tên</label>
          <input type="text" class="form-control" id="addName" placeholder="Nhập họ và tên" required>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Email</label>
          <input type="email" class="form-control" id="addEmail" placeholder="Nhập email" required>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Số điện thoại</label>
          <input type="text" class="form-control" id="addPhone" placeholder="Nhập số điện thoại" required>
        </div>
        <div class="mb-3">
          <label class="form-label fw-bold">Số lượng người</label>
          <input type="number" class="form-control" id="addQuantity" min="1" value="1" required>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
        <button class="btn btn-primary" id="confirmAddCustomer">
          <i class="bi bi-check-circle me-1"></i>Xác nhận thêm
        </button>
      </div>
    </div>
  </div>
</div>


<script>
  // Giá tour mỗi người
  const TOUR_PRICE = 2890000;

  document.getElementById('confirmAddCustomer').addEventListener('click', function () {
    const name = document.getElementById('addName').value.trim();
    const email = document.getElementById('addEmail').value.trim();
    const phone = document.getElementById('addPhone').value.trim();
    const quantity = parseInt(document.getElementById('addQuantity').value) || 1;

    if (!name || !email || !phone) {
      alert('Vui lòng điền đầy đủ thông tin!');
      return;
    }

    const totalPrice = quantity * TOUR_PRICE;
const formattedPrice = totalPrice.toLocaleString('vi-VN') + 'đ';

    // Tạo dòng mới trong bảng
    const tbody = document.getElementById('customerTableBody');
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
      <td>${name}</td>
      <td>${email}</td>
      <td>${phone}</td>
      <td>${quantity}</td>
      <td class="text-danger fw-bold">${formattedPrice}</td>
      <td><span class="status-unpaid">Chưa cọc</span></td>
    `;
    tbody.appendChild(newRow);

    // Đóng modal và reset form
    const modal = bootstrap.Modal.getInstance(document.getElementById('addCustomerModal'));
    modal.hide();
    document.getElementById('addName').value = '';
    document.getElementById('addEmail').value = '';
    document.getElementById('addPhone').value = '';
    document.getElementById('addQuantity').value = '1';

    // (Tuỳ chọn) Cập nhật lại tổng tiền, đã cọc, còn lại nếu cần
    // Bạn có thể thêm code tính toán lại phần thanh toán ở đây
  });
</script>
</body>
</html>